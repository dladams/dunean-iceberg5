// decorateNoiseVsTime.C
//
void decorateNoiseVsTime(TPadManipulator& man) {
  cout << "Decorating..." << endl;
  vector<int> runStarts = {6401, 6515, 6548, 6554, 6559, 6564, 6653, 6661, 6670, 6782, 6857,
                           6912, 7264, 7274, 7285, 7295, 7305, 7315, 7325, 7330, 7335,
                           7340, 7345, 7350, 7355};
  
  using GroupMap = map<int, string>;
  GroupMap  grpLabs;
  grpLabs[6401] = "CV";
  grpLabs[6515] = "C0";
  grpLabs[6548] = "P0";
  grpLabs[6554] = "PV";
  grpLabs[6559] = "C0";
  grpLabs[6564] = "CV";
  //grpLabs[6653] = "??";
  grpLabs[6661] = "P0";
  grpLabs[6670] = "CV";
  grpLabs[6782] = "CV";
  grpLabs[6857] = "C0";
  grpLabs[6912] = "XX";
  grpLabs[7264] = "C0";
  grpLabs[7274] = "P0";
  grpLabs[7285] = "PB";
  grpLabs[7295] = "PV";
  grpLabs[7305] = "CB";
  grpLabs[7315] = "CV";
  grpLabs[7325] = "CBd";
  grpLabs[7330] = "C0d";
  grpLabs[7335] = "P0d";
  grpLabs[7340] = "PBD";
  grpLabs[7345] = "PVn";
  grpLabs[7350] = "PVu";
  grpLabs[7355] = "XX";
  grpLabs[7395] = "P0";
  grpLabs[7400] = "PB";
  grpLabs[7407] = "PVa";
  grpLabs[7413] = "PVb";
  grpLabs[7419] = "PVc";
  grpLabs[7425] = "PVd";
  grpLabs[7431] = "PVe";
  grpLabs[7438] = "PVf";
  grpLabs[7445] = "PVg";
  grpLabs[7451] = "PVh";
  grpLabs[7457] = "PVi";
  grpLabs[7463] = "PVj";
  grpLabs[7469] = "PVk";
  grpLabs[7475] = "PVl";
  grpLabs[7481] = "PVm";
  grpLabs[7487] = "PVn";
  grpLabs[7492] = "PBa";
  grpLabs[7499] = "PBb";
  grpLabs[7505] = "P0";
  grpLabs[7515] = "C0a";
  grpLabs[7520] = "C0b";
  grpLabs[7525] = "C0c";
  grpLabs[7530] = "CBa";
  grpLabs[7535] = "CBb";
  grpLabs[7539] = "CV";
  grpLabs[7565] = "";
  grpLabs[7567] = "PB";
  grpLabs[7569] = "PV";
  grpLabs[7581] = "PV";
  grpLabs[7582] = "PB";
  grpLabs[7591] = "PVa";
  grpLabs[7604] = "PVb";
  grpLabs[7615] = "PVc";
  grpLabs[7620] = "PVd";
  grpLabs[7626] = "PB";
  grpLabs[7639] = "PV";
  grpLabs[7669] = "";
  grpLabs[7676] = "CV";
  grpLabs[7833] = "";
  grpLabs[7835] = "PV";
  grpLabs[8409] = "";
  grpLabs[8249] = "5a";
  grpLabs[8409] = "5a";
  grpLabs[8416] = "5b";
  grpLabs[8421] = "5b-cosmic 3/7";
  grpLabs[8431] = "5b-cosmic 3/8";
  grpLabs[8432] = "";
  grpLabs[8433] = "5c";
  grpLabs[8453] = "5a";
  grpLabs[8474] = "5c";
  grpLabs[8484] = "5c-pulser";
  grpLabs[8507] = "5c-cosmic";
  grpLabs[8615] = "5c";
  grpLabs[8620] = "5d";
  grpLabs[8630] = "5c";
  grpLabs[8635] = "5e";
  grpLabs[8639] = "5c";
  grpLabs[8640] = "5e";
  grpLabs[8645] = "5c";
  grpLabs[8646] = "5e";
  grpLabs[8651] = "5c";
  grpLabs[8652] = "5d";
  grpLabs[8655] = "5e";
  grpLabs[8657] = "5c";
  grpLabs[8658] = "5e";
  grpLabs[8662] = "5d";
  grpLabs[8663] = "5e";
  grpLabs[8670] = "5c";
  grpLabs[8671] = "5e";
  grpLabs[8677] = "5c";
  grpLabs[8680] = "";
  grpLabs[8692] = "5f-06";
  grpLabs[8769] = "";
  grpLabs[8773] = "5f-07";
  grpLabs[8814] = "5f-08";
  grpLabs[8820] = "5g-g";
  grpLabs[8826] = "5h-g";
  grpLabs[8832] = "5i-g";
  grpLabs[8838] = "5f-g";
  grpLabs[8844] = "5d-s";
  grpLabs[8850] = "5j-s";
  grpLabs[8856] = "5e-s";
  grpLabs[8862] = "5f-s";
  grpLabs[8868] = "5k-b";
  grpLabs[8874] = "5l-s";
  grpLabs[8880] = "5m-s";
  grpLabs[8886] = "5n-s";
  grpLabs[8892] = "5o-s";
  grpLabs[8898] = "5f-0322";
  grpLabs[8948] = "";
  grpLabs[8951] = "5p-cos1";
  grpLabs[9048] = "5f-0324";
  grpLabs[9050] = "5p-cos2";
  grpLabs[9052] = "5p-pul";
  grpLabs[9074] = "5q-pul";
  grpLabs[9085] = "5q";
  grpLabs[9105] = "5p-0325";
  grpLabs[9109] = "";
  grpLabs[9143] = "5C22-pul1";
  grpLabs[9158] = "5C21-pul1";
  grpLabs[9168] = "5C22-cos1";
  grpLabs[9179] = "5C02-cos1";
  grpLabs[9190] = "5C12-cos1";
  grpLabs[9201] = "5C32-cos1";
  grpLabs[9212] = "5C22-cos2";
  grpLabs[9223] = "5C21-cos1";
  grpLabs[9234] = "5C20-cos1";
  grpLabs[9245] = "5C23-cos1";
  grpLabs[9256] = "5C22-cos3";
  grpLabs[9267] = "5C22l-cos1";
  grpLabs[9278] = "5C31-cos1";
  grpLabs[9289] = "5C33-cos1";
  grpLabs[9300] = "5C11-cos1";
  grpLabs[9311] = "5C1-cos13";
  grpLabs[9323] = "5C22-pul2";
  grpLabs[9338] = "5C21-pul2";
  grpLabs[9348] = "5C22-mix1";
  grpLabs[9357] = "";
  grpLabs[9358] = "5C22-cos4";
  grpLabs[9411] = "5C22-test1";
  grpLabs[9431] = "5C01-cos1";
  grpLabs[9436] = "5C03-cos1";
  grpLabs[9441] = "5C02-cos2";
  grpLabs[9446] = "5C11-cos2";
  grpLabs[9451] = "5C13-cos2";
  grpLabs[9456] = "5C12-cos2";
  grpLabs[9461] = "5C21-cos2";
  grpLabs[9466] = "5C20-cos2";
  grpLabs[9471] = "5C23-cos2";
  grpLabs[9476] = "5C22-cos5";
  grpLabs[9479] = "5C22-test2";
  grpLabs[9488] = "5C33-test2";
  grpLabs[9491] = "5C22-test3";
  grpLabs[9496] = "";
  grpLabs[9507] = "5C22-pul3";
  grpLabs[9518] = "5C21-pul3";
  grpLabs[9526] = "5C02-pul1";
  grpLabs[9537] = "5C01-pul1";
  grpLabs[9548] = "5C12-pul1";
  grpLabs[9559] = "5C11-pul1";
  grpLabs[9570] = "5C23-pul1";
  grpLabs[9580] = "5C20-pul1";
  grpLabs[9591] = "5C31-pul1";
  grpLabs[9602] = "5C32-pul1";
  grpLabs[9613] = "5C22-cos6";
  grpLabs[9638] = "5C22-hvoff";
  grpLabs[9666] = "5C22-ar39coff";
  grpLabs[9683] = "";
  grpLabs[9692] = "5C22-ar39";
  grpLabs[9712] = "";
  grpLabs[9714] = "5C01-cos2";
  grpLabs[9717] = "5C03-cos3";
  grpLabs[9719] = "5C02-cos2";
  grpLabs[9721] = "5C11-cos3";
  grpLabs[9723] = "5C13-cos3";
  grpLabs[9725] = "5C12-cos3";
  grpLabs[9727] = "5C21-cos3";
  grpLabs[9729] = "5C20-cos3";
  grpLabs[9731] = "5C23-cos3";
  grpLabs[9733] = "5C22-cos7";
  grpLabs[9738] = "5C22-test3";
  grpLabs[9744] = "End";
  //grpLabs[9666] = "TBD";
  double xmin = man.xmin();
  double xmax = man.xmax();
  double xran = xmax - xmin;
  double ymin = man.ymin();
  double ymax = man.ymax();
  double yran = ymax - ymin;
  double xoff = 0.002*(xmax - xmin);
  double dylab = 0.05*yran;
  double ylab1 = 0.05*yran + ymin;
  double ylab2 = ylab1 + 2.1*dylab;
  double ylab = ylab1;
  for ( GroupMap::const_iterator igrp = grpLabs.begin(); igrp!=grpLabs.end(); ++igrp ) {
    int run = igrp->first;
    if ( run < xmin ) continue;
    if ( run >= xmax ) break;
    string slab = igrp->second;
    double xlin = run - 0.5;
    man.addVerticalLine(xlin);
    double xlab = xlin + xoff;
    //cout << "XXX " << xlab << "  " << ylab << "  " << slab << endl;
    TLatex* ptxt = new TLatex(xlab, ylab, slab.c_str());
    //ptxt->SetNDC();
    ptxt->SetTextFont(42);
    ptxt->SetTextSize(0.035);
    man.add(ptxt);
    if ( slab.size() ) ylab += dylab;
    if ( ylab > ylab2 ) ylab = ylab1;
  }
  // Add dates.
  map<unsigned int, string> rundates = IcebergHelper::runDates(xmin, xmax, 2);
  ylab = 0.005*yran + ymin;
  for ( auto irda : rundates ) {
    float x = irda.first;
    string sdat = irda.second;
    TLatex* ptxt = new TLatex(x, ylab, sdat.c_str());
    ptxt->SetTextFont(42);
    ptxt->SetTextSize(0.03);
    man.add(ptxt);
  }
}
